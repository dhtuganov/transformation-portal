import type { Exercise, WeekNumber, CognitiveFunction } from './types'
import type { MBTIType } from '@/types/database'
import { getInferiorFunction } from './program'

/**
 * Shadow Work Exercises
 * Type-specific exercises for each inferior function and week
 */

// Exercises for Se (Extraverted Sensing) - INTJ, INFJ
const SE_EXERCISES: Exercise[] = [
  // Week 1: Awareness
  {
    id: 'se-w1-body-scan',
    type: 'meditation',
    title: 'Сканирование тела',
    description: 'Практика осознанности тела для развития контакта с физическими ощущениями',
    duration: 10,
    difficulty: 'beginner',
    targetFunction: 'Se',
    compatibleTypes: ['INTJ', 'INFJ'],
    instructions: [
      'Найдите тихое место и примите удобное положение',
      'Закройте глаза и сделайте три глубоких вдоха',
      'Начните медленно перемещать внимание по телу снизу вверх',
      'Замечайте все ощущения без оценки: тепло, холод, напряжение, расслабление',
      'Если обнаружите напряжение, просто отметьте его',
      'Завершите практику несколькими глубокими вдохами'
    ],
    reflectionPrompts: [
      'Какие части тела было легче ощущать?',
      'Где вы обнаружили напряжение?',
      'Насколько вам было комфортно с этой практикой?'
    ],
    benefits: [
      'Развитие телесной осознанности',
      'Снижение стресса',
      'Заземление в настоящем моменте'
    ],
    tags: ['телесность', 'медитация', 'осознанность']
  },
  {
    id: 'se-w1-sensory-walk',
    type: 'practice',
    title: 'Прогулка пяти чувств',
    description: 'Осознанная прогулка с фокусом на сенсорном опыте',
    duration: 20,
    difficulty: 'beginner',
    targetFunction: 'Se',
    compatibleTypes: ['INTJ', 'INFJ'],
    instructions: [
      'Выйдите на 20-минутную прогулку',
      'Каждые 4 минуты фокусируйтесь на одном чувстве',
      'Зрение: замечайте цвета, формы, движения',
      'Слух: различайте звуки вокруг вас',
      'Осязание: ощущайте текстуры, температуру, ветер',
      'Обоняние: замечайте запахи',
      'Вкус: если возможно, попробуйте что-то (фрукт, воду)'
    ],
    reflectionPrompts: [
      'Какое чувство было наиболее активным?',
      'Что вы заметили впервые?',
      'Насколько сложно было оставаться в настоящем?'
    ],
    benefits: [
      'Развитие сенсорной чувствительности',
      'Присутствие в моменте',
      'Снижение ментального шума'
    ],
    tags: ['чувства', 'природа', 'осознанность']
  },

  // Week 2: Recognition
  {
    id: 'se-w2-stress-log',
    type: 'journaling',
    title: 'Дневник стресса и тела',
    description: 'Отслеживание связи между стрессом и телесными реакциями',
    duration: 15,
    difficulty: 'beginner',
    targetFunction: 'Se',
    compatibleTypes: ['INTJ', 'INFJ'],
    instructions: [
      'Заведите таблицу: Ситуация | Мысли | Телесные ощущения | Реакция',
      'Каждый раз при стрессе записывайте все четыре колонки',
      'Особое внимание уделяйте телесным ощущениям',
      'Отмечайте: где в теле, какой характер, насколько интенсивно',
      'Ищите паттерны в конце недели'
    ],
    reflectionPrompts: [
      'Какие телесные сигналы повторяются?',
      'Как тело реагирует раньше ума?',
      'Какие ситуации вызывают наибольший отклик?'
    ],
    benefits: [
      'Распознавание ранних сигналов стресса',
      'Связь ума и тела',
      'Предупреждение выгорания'
    ],
    tags: ['стресс', 'дневник', 'паттерны']
  },

  // Week 3: Triggers
  {
    id: 'se-w3-grounding',
    type: 'practice',
    title: 'Техника 5-4-3-2-1',
    description: 'Быстрое заземление через органы чувств',
    duration: 5,
    difficulty: 'beginner',
    targetFunction: 'Se',
    compatibleTypes: ['INTJ', 'INFJ'],
    instructions: [
      'При стрессе или тревоге остановитесь',
      'Назовите 5 вещей, которые вы ВИДИТЕ',
      'Назовите 4 вещи, которые вы СЛЫШИТЕ',
      'Назовите 3 вещи, которые вы ЧУВСТВУЕТЕ (тактильно)',
      'Назовите 2 вещи, которые вы ОБОНЯЕТЕ',
      'Назовите 1 вещь, которую вы можете ПОПРОБОВАТЬ'
    ],
    reflectionPrompts: [
      'Как изменилось состояние после упражнения?',
      'Какое чувство помогло больше всего?',
      'В каких ситуациях это наиболее полезно?'
    ],
    benefits: [
      'Быстрое заземление',
      'Выход из головы',
      'Снижение тревожности'
    ],
    tags: ['заземление', 'тревога', 'быстро']
  },

  // Week 4: Acceptance
  {
    id: 'se-w4-pleasure',
    type: 'practice',
    title: 'Карта удовольствий',
    description: 'Исследование приятных телесных и сенсорных переживаний',
    duration: 30,
    difficulty: 'intermediate',
    targetFunction: 'Se',
    compatibleTypes: ['INTJ', 'INFJ'],
    instructions: [
      'Создайте список из 20 простых телесных удовольствий',
      'Примеры: горячий душ, вкусная еда, массаж, растяжка',
      'Попробуйте минимум 3 из списка на этой неделе',
      'Во время каждого полностью погружайтесь в ощущения',
      'Замечайте, как тело реагирует на приятное'
    ],
    reflectionPrompts: [
      'Какие удовольствия были наиболее яркими?',
      'Насколько легко было позволить себе наслаждаться?',
      'Что мешало полному погружению?'
    ],
    benefits: [
      'Принятие телесности',
      'Развитие способности к удовольствию',
      'Баланс ума и тела'
    ],
    tags: ['удовольствие', 'тело', 'принятие']
  },

  // Week 5: Integration 1
  {
    id: 'se-w5-movement',
    type: 'practice',
    title: 'Осознанное движение',
    description: 'Практика движения с полным присутствием',
    duration: 20,
    difficulty: 'intermediate',
    targetFunction: 'Se',
    compatibleTypes: ['INTJ', 'INFJ'],
    instructions: [
      'Выберите форму движения: йога, танец, тай-чи, или просто свободное движение',
      'Двигайтесь медленно, осознавая каждое движение',
      'Чувствуйте, как мышцы работают, как меняется баланс',
      'Не фокусируйтесь на технике, фокусируйтесь на ощущениях',
      'Завершите благодарностью своему телу'
    ],
    reflectionPrompts: [
      'Как изменилось восприятие тела?',
      'Какие движения были наиболее приятными?',
      'Насколько сложно было оставаться в ощущениях?'
    ],
    benefits: [
      'Интеграция ума и тела',
      'Развитие координации',
      'Удовольствие от движения'
    ],
    tags: ['движение', 'йога', 'интеграция']
  },

  // Week 6: Integration 2
  {
    id: 'se-w6-aesthetics',
    type: 'practice',
    title: 'Создание красоты',
    description: 'Эстетическая практика: создание визуально приятного пространства',
    duration: 45,
    difficulty: 'intermediate',
    targetFunction: 'Se',
    compatibleTypes: ['INTJ', 'INFJ'],
    instructions: [
      'Выберите пространство для преобразования (стол, комната, сад)',
      'Обратите внимание на цвета, текстуры, формы',
      'Создайте композицию, которая радует глаз',
      'Используйте принцип: меньше думать, больше чувствовать',
      'Не нужно объяснять выбор — просто создавайте красивое'
    ],
    reflectionPrompts: [
      'Как вы принимали решения о красоте?',
      'Доверяли ли вы своему эстетическому чувству?',
      'Как пространство влияет на ваше состояние?'
    ],
    benefits: [
      'Развитие эстетического чувства',
      'Доверие чувствам',
      'Создание поддерживающей среды'
    ],
    tags: ['эстетика', 'красота', 'пространство']
  },

  // Week 7: Practice
  {
    id: 'se-w7-routine',
    type: 'behavioral',
    title: 'Ритуал заботы о теле',
    description: 'Создание ежедневного ритуала телесной заботы',
    duration: 15,
    difficulty: 'intermediate',
    targetFunction: 'Se',
    compatibleTypes: ['INTJ', 'INFJ'],
    instructions: [
      'Создайте утренний или вечерний ритуал заботы о теле',
      'Включите элементы: растяжка, уход за кожей, массаж',
      'Выполняйте медленно и осознанно',
      'Делайте это каждый день в одно и то же время',
      'Наблюдайте, как меняется отношение к телу'
    ],
    reflectionPrompts: [
      'Какие элементы ритуала наиболее ценны?',
      'Как регулярность влияет на практику?',
      'Что изменилось в отношении к телу?'
    ],
    benefits: [
      'Регулярная забота о теле',
      'Формирование привычки',
      'Интеграция Se в жизнь'
    ],
    tags: ['ритуал', 'привычка', 'забота']
  },

  // Week 8: Mastery
  {
    id: 'se-w8-integration',
    type: 'reflection',
    title: 'Путь телесной интеграции',
    description: 'Оценка пройденного пути и планирование дальнейшего развития',
    duration: 30,
    difficulty: 'advanced',
    targetFunction: 'Se',
    compatibleTypes: ['INTJ', 'INFJ'],
    instructions: [
      'Перечитайте все записи за 8 недель',
      'Отметьте ключевые инсайты и прорывы',
      'Опишите, как изменилось отношение к телу и сенсорному опыту',
      'Создайте план поддержания практики',
      'Определите области для дальнейшего развития'
    ],
    reflectionPrompts: [
      'Какой прогресс наиболее значимый?',
      'Какие практики стали частью жизни?',
      'Куда вы хотите двигаться дальше с Se?'
    ],
    benefits: [
      'Осознание роста',
      'Закрепление достижений',
      'Мотивация для продолжения'
    ],
    tags: ['итоги', 'рост', 'планирование']
  }
]

// Exercises for Si (Introverted Sensing) - ENTP, ENFP
const SI_EXERCISES: Exercise[] = [
  {
    id: 'si-w1-routine-audit',
    type: 'journaling',
    title: 'Аудит рутины',
    description: 'Осознание своих привычек и ритуалов',
    duration: 15,
    difficulty: 'beginner',
    targetFunction: 'Si',
    compatibleTypes: ['ENTP', 'ENFP'],
    instructions: [
      'Запишите свою типичную неделю час за часом',
      'Отметьте повторяющиеся действия и ритуалы',
      'Обратите внимание на то, что происходит автоматически',
      'Оцените, какие привычки поддерживают вас, а какие истощают',
      'Отметьте области хаоса и нестабильности'
    ],
    reflectionPrompts: [
      'Есть ли у меня устойчивая рутина?',
      'Какие привычки помогают мне?',
      'Где в жизни не хватает структуры?'
    ],
    benefits: [
      'Осознание паттернов',
      'Выявление хаоса',
      'База для создания рутины'
    ],
    tags: ['рутина', 'привычки', 'структура']
  },
  {
    id: 'si-w1-body-signals',
    type: 'awareness',
    title: 'Дневник телесных сигналов',
    description: 'Отслеживание внутренних телесных ощущений',
    duration: 10,
    difficulty: 'beginner',
    targetFunction: 'Si',
    compatibleTypes: ['ENTP', 'ENFP'],
    instructions: [
      'Три раза в день останавливайтесь и сканируйте тело',
      'Записывайте: уровень энергии, голод, жажду, напряжение',
      'Отмечайте тонкие сигналы: легкая усталость, начало голода',
      'Не игнорируйте дискомфорт — записывайте его',
      'Ищите связи между сигналами и вашей активностью'
    ],
    reflectionPrompts: [
      'Какие сигналы я обычно игнорирую?',
      'Когда я замечаю потребности тела слишком поздно?',
      'Какие паттерны я вижу?'
    ],
    benefits: [
      'Чувствительность к телу',
      'Профилактика выгорания',
      'Своевременный отклик на потребности'
    ],
    tags: ['тело', 'сигналы', 'осознанность']
  },

  {
    id: 'si-w2-memory-journal',
    type: 'journaling',
    title: 'Дневник важных воспоминаний',
    description: 'Работа с личной историей и значимым опытом',
    duration: 20,
    difficulty: 'beginner',
    targetFunction: 'Si',
    compatibleTypes: ['ENTP', 'ENFP'],
    instructions: [
      'Каждый день записывайте одно значимое воспоминание',
      'Фокус на сенсорных деталях: запахи, звуки, ощущения',
      'Что вы чувствовали? Что было важного?',
      'Какой урок вы вынесли из этого опыта?',
      'Как это повлияло на то, кто вы сейчас?'
    ],
    reflectionPrompts: [
      'Какие воспоминания наиболее яркие?',
      'Какие паттерны я вижу в своей истории?',
      'Как прошлое формирует настоящее?'
    ],
    benefits: [
      'Уважение к опыту',
      'Связь с прошлым',
      'Понимание себя'
    ],
    tags: ['память', 'история', 'опыт']
  },

  {
    id: 'si-w3-anchor-practice',
    type: 'practice',
    title: 'Практика якорения',
    description: 'Создание стабильных точек опоры в дне',
    duration: 10,
    difficulty: 'intermediate',
    targetFunction: 'Si',
    compatibleTypes: ['ENTP', 'ENFP'],
    instructions: [
      'Выберите 3 якоря для дня: утро, день, вечер',
      'Примеры: утренний кофе, обеденная прогулка, вечернее чтение',
      'Выполняйте каждый якорь в одно и то же время',
      'Делайте это осознанно и с полным присутствием',
      'Используйте якоря как точки возврата к себе'
    ],
    reflectionPrompts: [
      'Как якоря влияют на ощущение стабильности?',
      'Легко ли поддерживать регулярность?',
      'Какие якоря наиболее ценны?'
    ],
    benefits: [
      'Стабильность в дне',
      'Регулярность',
      'Снижение хаоса'
    ],
    tags: ['якоря', 'стабильность', 'ритуал']
  },

  {
    id: 'si-w4-tradition-honor',
    type: 'reflection',
    title: 'Честь традиций',
    description: 'Исследование ценности традиций и ритуалов',
    duration: 30,
    difficulty: 'intermediate',
    targetFunction: 'Si',
    compatibleTypes: ['ENTP', 'ENFP'],
    instructions: [
      'Вспомните семейные или культурные традиции',
      'Какие из них имеют для вас значение?',
      'Выберите одну традицию для возрождения или создания новой',
      'Что эта традиция выражает? Какие ценности?',
      'Как вы можете интегрировать её в жизнь?'
    ],
    reflectionPrompts: [
      'Какие традиции я отверг? Почему?',
      'Какую мудрость несут традиции?',
      'Какие новые традиции я хочу создать?'
    ],
    benefits: [
      'Связь с корнями',
      'Уважение к прошлому',
      'Создание смысла'
    ],
    tags: ['традиции', 'ценности', 'смысл']
  },

  {
    id: 'si-w5-health-routine',
    type: 'behavioral',
    title: 'Рутина здоровья',
    description: 'Создание устойчивых привычек заботы о здоровье',
    duration: 30,
    difficulty: 'intermediate',
    targetFunction: 'Si',
    compatibleTypes: ['ENTP', 'ENFP'],
    instructions: [
      'Выберите 3 базовые привычки: сон, питание, движение',
      'Создайте простой план для каждой',
      'Сон: фиксированное время отхода ко сну',
      'Питание: регулярные приёмы пищи',
      'Движение: ежедневная активность',
      'Отслеживайте выполнение в течение недели'
    ],
    reflectionPrompts: [
      'Какие привычки даются легче?',
      'Что мешает регулярности?',
      'Как улучшилось самочувствие?'
    ],
    benefits: [
      'Физическое здоровье',
      'Энергия',
      'Стабильность'
    ],
    tags: ['здоровье', 'привычки', 'забота']
  },

  {
    id: 'si-w6-detail-attention',
    type: 'practice',
    title: 'Практика внимания к деталям',
    description: 'Развитие наблюдательности и внимания к деталям',
    duration: 20,
    difficulty: 'intermediate',
    targetFunction: 'Si',
    compatibleTypes: ['ENTP', 'ENFP'],
    instructions: [
      'Выберите повседневную активность',
      'Выполните её с максимальным вниманием к деталям',
      'Замечайте то, что обычно пропускаете',
      'Примеры: приготовление еды, уборка, организация пространства',
      'Записывайте все замеченные детали'
    ],
    reflectionPrompts: [
      'Что я обычно не замечаю?',
      'Как внимание к деталям меняет опыт?',
      'Где внимание к деталям было бы полезно?'
    ],
    benefits: [
      'Наблюдательность',
      'Качество выполнения',
      'Присутствие'
    ],
    tags: ['детали', 'внимание', 'качество']
  },

  {
    id: 'si-w7-consistency-track',
    type: 'behavioral',
    title: 'Трекер последовательности',
    description: 'Отслеживание и поддержание последовательности в практиках',
    duration: 15,
    difficulty: 'advanced',
    targetFunction: 'Si',
    compatibleTypes: ['ENTP', 'ENFP'],
    instructions: [
      'Создайте трекер для ключевых привычек',
      'Отмечайте выполнение каждый день',
      'Цель: набрать серию в 7 дней подряд',
      'Если пропустили — начинайте заново без самокритики',
      'Празднуйте каждую серию'
    ],
    reflectionPrompts: [
      'Какие привычки держатся легче?',
      'Что помогает поддерживать последовательность?',
      'Как я отношусь к несовершенству?'
    ],
    benefits: [
      'Последовательность',
      'Самодисциплина',
      'Достижение целей'
    ],
    tags: ['трекер', 'последовательность', 'дисциплина']
  },

  {
    id: 'si-w8-wisdom-integration',
    type: 'reflection',
    title: 'Интеграция опыта и мудрости',
    description: 'Оценка прогресса и интеграция полученного опыта',
    duration: 45,
    difficulty: 'advanced',
    targetFunction: 'Si',
    compatibleTypes: ['ENTP', 'ENFP'],
    instructions: [
      'Просмотрите записи за 8 недель',
      'Какие уроки вы извлекли?',
      'Какие привычки укоренились?',
      'Создайте "книгу мудрости" — ключевые инсайты',
      'План поддержания структуры и рутины'
    ],
    reflectionPrompts: [
      'Как изменилось отношение к рутине?',
      'Какой опыт был наиболее ценным?',
      'Как я буду поддерживать эти практики?'
    ],
    benefits: [
      'Интеграция опыта',
      'Долгосрочное изменение',
      'Мудрость'
    ],
    tags: ['мудрость', 'интеграция', 'итоги']
  }
]

// Exercises for Ne (Extraverted Intuition) - ISTJ, ISFJ
const NE_EXERCISES: Exercise[] = [
  {
    id: 'ne-w1-possibility-thinking',
    type: 'awareness',
    title: 'Дневник возможностей',
    description: 'Практика видения альтернатив в повседневных ситуациях',
    duration: 15,
    difficulty: 'beginner',
    targetFunction: 'Ne',
    compatibleTypes: ['ISTJ', 'ISFJ'],
    instructions: [
      'Выберите 3 ситуации за день',
      'Для каждой запишите: что произошло + ваше решение',
      'Затем запишите 3-5 альтернативных вариантов',
      'Не оценивайте — просто генерируйте варианты',
      'Отметьте, какие варианты удивили вас'
    ],
    reflectionPrompts: [
      'Насколько легко было генерировать альтернативы?',
      'Какие идеи были неожиданными?',
      'Как это меняет взгляд на ситуацию?'
    ],
    benefits: [
      'Гибкость мышления',
      'Видение альтернатив',
      'Снижение ригидности'
    ],
    tags: ['возможности', 'альтернативы', 'гибкость']
  },
  {
    id: 'ne-w1-what-if',
    type: 'reflection',
    title: 'Игра "Что если?"',
    description: 'Развитие воображения через вопросы "что если"',
    duration: 10,
    difficulty: 'beginner',
    targetFunction: 'Ne',
    compatibleTypes: ['ISTJ', 'ISFJ'],
    instructions: [
      'Каждый день задавайте себе 5 вопросов "Что если?"',
      'Начинайте с простого: "Что если я пойду другой дорогой?"',
      'Развивайте идею: что может произойти?',
      'Не нужно реализовывать — просто исследуйте мысленно',
      'Записывайте самые интересные сценарии'
    ],
    reflectionPrompts: [
      'Какие "что если" были наиболее захватывающими?',
      'Насколько комфортно было в неопределённости?',
      'Какие новые идеи появились?'
    ],
    benefits: [
      'Развитие воображения',
      'Комфорт с неопределённостью',
      'Креативное мышление'
    ],
    tags: ['воображение', 'что-если', 'креативность']
  },

  {
    id: 'ne-w2-pattern-hunting',
    type: 'practice',
    title: 'Охота за паттернами',
    description: 'Поиск неочевидных связей и паттернов',
    duration: 20,
    difficulty: 'beginner',
    targetFunction: 'Ne',
    compatibleTypes: ['ISTJ', 'ISFJ'],
    instructions: [
      'Выберите 2-3 несвязанные темы',
      'Ищите между ними неожиданные связи',
      'Используйте метафоры и аналогии',
      'Не критикуйте идеи — пусть поток течёт',
      'Запишите самые интересные инсайты'
    ],
    reflectionPrompts: [
      'Какие связи были неожиданными?',
      'Как я могу применить это мышление?',
      'Что мешало свободному потоку идей?'
    ],
    benefits: [
      'Паттерн-мышление',
      'Креативные связи',
      'Инсайты'
    ],
    tags: ['паттерны', 'связи', 'инсайты']
  },

  {
    id: 'ne-w3-new-route',
    type: 'behavioral',
    title: 'Новый путь',
    description: 'Намеренное изменение привычных маршрутов',
    duration: 30,
    difficulty: 'intermediate',
    targetFunction: 'Ne',
    compatibleTypes: ['ISTJ', 'ISFJ'],
    instructions: [
      'Выберите привычный маршрут (работа, магазин, прогулка)',
      'Каждый день идите новым путём',
      'Обращайте внимание на новые детали',
      'Что вы открываете? Что чувствуете?',
      'Разрешите себе заблудиться (безопасно)'
    ],
    reflectionPrompts: [
      'Насколько комфортно было менять маршрут?',
      'Что нового вы обнаружили?',
      'Как это влияет на восприятие?'
    ],
    benefits: [
      'Выход из зоны комфорта',
      'Открытость новому',
      'Гибкость'
    ],
    tags: ['новое', 'исследование', 'гибкость']
  },

  {
    id: 'ne-w4-brainstorm',
    type: 'practice',
    title: 'Свободный брейншторм',
    description: 'Практика генерации идей без оценки',
    duration: 20,
    difficulty: 'intermediate',
    targetFunction: 'Ne',
    compatibleTypes: ['ISTJ', 'ISFJ'],
    instructions: [
      'Выберите любую тему или вопрос',
      'Установите таймер на 10 минут',
      'Записывайте ВСЕ идеи, которые приходят',
      'Никакой оценки, никакой критики',
      'Цель: количество, не качество',
      'После оцените: какие идеи удивили?'
    ],
    reflectionPrompts: [
      'Сколько идей вы сгенерировали?',
      'Насколько легко было отключить критика?',
      'Какие идеи были неожиданными?'
    ],
    benefits: [
      'Генерация идей',
      'Отключение критика',
      'Креативность'
    ],
    tags: ['брейншторм', 'идеи', 'креативность']
  },

  {
    id: 'ne-w5-experiment-week',
    type: 'behavioral',
    title: 'Неделя экспериментов',
    description: 'Ежедневные маленькие эксперименты с новым',
    duration: 15,
    difficulty: 'intermediate',
    targetFunction: 'Ne',
    compatibleTypes: ['ISTJ', 'ISFJ'],
    instructions: [
      'Каждый день пробуйте что-то новое',
      'Это может быть очень простым: новый сорт чая, другой порядок задач',
      'Цель не результат, а опыт нового',
      'Записывайте: что попробовали, что почувствовали',
      'Отмечайте удачные эксперименты'
    ],
    reflectionPrompts: [
      'Какие эксперименты были приятными?',
      'Что мешало пробовать новое?',
      'Как изменилось отношение к экспериментам?'
    ],
    benefits: [
      'Открытость опыту',
      'Комфорт с новым',
      'Расширение границ'
    ],
    tags: ['эксперименты', 'новое', 'опыт']
  },

  {
    id: 'ne-w6-divergent-thinking',
    type: 'practice',
    title: 'Дивергентное мышление',
    description: 'Упражнения на расширение мышления',
    duration: 25,
    difficulty: 'advanced',
    targetFunction: 'Ne',
    compatibleTypes: ['ISTJ', 'ISFJ'],
    instructions: [
      'Возьмите обычный предмет (скрепка, ложка)',
      'Придумайте 50 нестандартных применений',
      'После первых 10 будет сложно — продолжайте',
      'Разрешите себе глупые и абсурдные идеи',
      'Это тренировка гибкости, не практичности'
    ],
    reflectionPrompts: [
      'На каком моменте стало сложно?',
      'Какие идеи были наиболее креативными?',
      'Как можно применить это мышление в жизни?'
    ],
    benefits: [
      'Дивергентное мышление',
      'Креативность',
      'Гибкость ума'
    ],
    tags: ['дивергентное', 'креативность', 'мышление']
  },

  {
    id: 'ne-w7-improv',
    type: 'behavioral',
    title: 'Принцип импровизации',
    description: 'Практика спонтанности и импровизации',
    duration: 30,
    difficulty: 'advanced',
    targetFunction: 'Ne',
    compatibleTypes: ['ISTJ', 'ISFJ'],
    instructions: [
      'Выберите ситуацию, где можно импровизировать',
      'Примеры: разговор, маршрут, план дня',
      'Следуйте принципу "да, и..." вместо "нет, но..."',
      'Примите то, что происходит, и добавьте своё',
      'Доверяйте процессу'
    ],
    reflectionPrompts: [
      'Насколько комфортна была импровизация?',
      'Что помогло принять неопределённость?',
      'Какие неожиданные результаты появились?'
    ],
    benefits: [
      'Спонтанность',
      'Гибкость',
      'Доверие процессу'
    ],
    tags: ['импровизация', 'спонтанность', 'гибкость']
  },

  {
    id: 'ne-w8-possibility-mindset',
    type: 'reflection',
    title: 'Мышление возможностями',
    description: 'Интеграция мышления возможностями в жизнь',
    duration: 45,
    difficulty: 'advanced',
    targetFunction: 'Ne',
    compatibleTypes: ['ISTJ', 'ISFJ'],
    instructions: [
      'Оцените свой прогресс за 8 недель',
      'Как изменилась гибкость мышления?',
      'Какие практики стали привычными?',
      'Создайте "меню возможностей" для будущих ситуаций',
      'План поддержания открытости и гибкости'
    ],
    reflectionPrompts: [
      'Насколько легче видеть альтернативы?',
      'Какие прорывы были ключевыми?',
      'Как я буду развивать Ne дальше?'
    ],
    benefits: [
      'Интеграция Ne',
      'Гибкое мышление',
      'Открытость'
    ],
    tags: ['возможности', 'интеграция', 'рост']
  }
]

// Exercises for Ni (Introverted Intuition) - ESTP, ESFP
const NI_EXERCISES: Exercise[] = [
  {
    id: 'ni-w1-future-vision',
    type: 'reflection',
    title: 'Видение будущего',
    description: 'Практика представления долгосрочной перспективы',
    duration: 20,
    difficulty: 'beginner',
    targetFunction: 'Ni',
    compatibleTypes: ['ESTP', 'ESFP'],
    instructions: [
      'Найдите тихое место, закройте глаза',
      'Представьте себя через 5 лет',
      'Где вы? Чем занимаетесь? С кем?',
      'Какие ценности важны? Чего вы достигли?',
      'Запишите образы, которые появились'
    ],
    reflectionPrompts: [
      'Насколько легко было представить будущее?',
      'Какие образы были яркими?',
      'Что удивило в видении?'
    ],
    benefits: [
      'Долгосрочная перспектива',
      'Осмысленность',
      'Направление'
    ],
    tags: ['будущее', 'видение', 'цели']
  },
  {
    id: 'ni-w1-meaning-journal',
    type: 'journaling',
    title: 'Дневник смысла',
    description: 'Поиск глубинного смысла в повседневных событиях',
    duration: 15,
    difficulty: 'beginner',
    targetFunction: 'Ni',
    compatibleTypes: ['ESTP', 'ESFP'],
    instructions: [
      'Каждый вечер выберите одно событие дня',
      'Задайте вопрос: "Какой глубинный смысл здесь?"',
      'Не останавливайтесь на поверхности',
      'Ищите паттерн, урок, инсайт',
      'Запишите свои размышления'
    ],
    reflectionPrompts: [
      'Какие смыслы я обнаружил?',
      'Насколько глубоко я смог пойти?',
      'Как это меняет восприятие событий?'
    ],
    benefits: [
      'Глубина восприятия',
      'Поиск смысла',
      'Рефлексия'
    ],
    tags: ['смысл', 'глубина', 'рефлексия']
  },

  {
    id: 'ni-w2-symbol-work',
    type: 'reflection',
    title: 'Работа с символами',
    description: 'Исследование символического значения образов',
    duration: 20,
    difficulty: 'beginner',
    targetFunction: 'Ni',
    compatibleTypes: ['ESTP', 'ESFP'],
    instructions: [
      'Вспомните яркий сон или образ, который запомнился',
      'Какие символы там присутствовали?',
      'Что они могут означать для вас?',
      'Не ищите готовых ответов — доверяйте интуиции',
      'Запишите интерпретации'
    ],
    reflectionPrompts: [
      'Какие символы резонируют?',
      'Что они говорят о вашей ситуации?',
      'Какой инсайт появился?'
    ],
    benefits: [
      'Символическое мышление',
      'Работа с бессознательным',
      'Инсайты'
    ],
    tags: ['символы', 'сны', 'бессознательное']
  },

  {
    id: 'ni-w3-meditation',
    type: 'meditation',
    title: 'Медитация инсайта',
    description: 'Медитативная практика для доступа к внутренней мудрости',
    duration: 15,
    difficulty: 'intermediate',
    targetFunction: 'Ni',
    compatibleTypes: ['ESTP', 'ESFP'],
    instructions: [
      'Сядьте в тишине, закройте глаза',
      'Сформулируйте вопрос, на который ищете ответ',
      'Не пытайтесь найти ответ — просто держите вопрос',
      'Наблюдайте за образами, ощущениями, мыслями',
      'Доверяйте тому, что появляется'
    ],
    reflectionPrompts: [
      'Какие образы или ощущения появились?',
      'Был ли момент инсайта?',
      'Что интуиция подсказывает?'
    ],
    benefits: [
      'Доступ к интуиции',
      'Внутренняя мудрость',
      'Инсайты'
    ],
    tags: ['медитация', 'интуиция', 'инсайт']
  },

  {
    id: 'ni-w4-pattern-journal',
    type: 'journaling',
    title: 'Дневник жизненных паттернов',
    description: 'Поиск повторяющихся тем в своей жизни',
    duration: 30,
    difficulty: 'intermediate',
    targetFunction: 'Ni',
    compatibleTypes: ['ESTP', 'ESFP'],
    instructions: [
      'Просмотрите свою жизнь по периодам (годы, этапы)',
      'Какие темы повторяются?',
      'Какие уроки приходят снова и снова?',
      'Какой глубинный паттерн вы видите?',
      'Что он говорит о вашем пути?'
    ],
    reflectionPrompts: [
      'Какие паттерны я вижу?',
      'Какие уроки повторяются?',
      'Куда ведёт этот паттерн?'
    ],
    benefits: [
      'Видение паттернов',
      'Понимание пути',
      'Мудрость'
    ],
    tags: ['паттерны', 'жизнь', 'мудрость']
  },

  {
    id: 'ni-w5-solitude',
    type: 'practice',
    title: 'Практика уединения',
    description: 'Регулярное время для внутреннего процессинга',
    duration: 30,
    difficulty: 'intermediate',
    targetFunction: 'Ni',
    compatibleTypes: ['ESTP', 'ESFP'],
    instructions: [
      'Выделите 30 минут полного уединения',
      'Без телефона, без внешних стимулов',
      'Просто будьте наедине с собой',
      'Позвольте мыслям течь',
      'Записывайте важные инсайты'
    ],
    reflectionPrompts: [
      'Насколько комфортно было в тишине?',
      'Какие мысли появились?',
      'Какие инсайты пришли?'
    ],
    benefits: [
      'Внутренняя ясность',
      'Инсайты',
      'Самопознание'
    ],
    tags: ['уединение', 'тишина', 'инсайты']
  },

  {
    id: 'ni-w6-vision-board',
    type: 'practice',
    title: 'Доска видения',
    description: 'Создание визуального представления будущего',
    duration: 60,
    difficulty: 'intermediate',
    targetFunction: 'Ni',
    compatibleTypes: ['ESTP', 'ESFP'],
    instructions: [
      'Соберите изображения, которые резонируют с вашим будущим',
      'Не думайте логически — выбирайте интуитивно',
      'Создайте коллаж или доску',
      'Какую историю рассказывают образы?',
      'Поместите на видное место'
    ],
    reflectionPrompts: [
      'Какую картину будущего я вижу?',
      'Какие темы преобладают?',
      'Что это говорит о моих истинных желаниях?'
    ],
    benefits: [
      'Кристаллизация видения',
      'Ясность цели',
      'Мотивация'
    ],
    tags: ['видение', 'будущее', 'визуализация']
  },

  {
    id: 'ni-w7-contemplation',
    type: 'reflection',
    title: 'Созерцательная практика',
    description: 'Глубокое размышление над важными вопросами',
    duration: 30,
    difficulty: 'advanced',
    targetFunction: 'Ni',
    compatibleTypes: ['ESTP', 'ESFP'],
    instructions: [
      'Выберите глубокий вопрос (смысл жизни, предназначение)',
      'Размышляйте над ним без спешки',
      'Не ищите быстрых ответов',
      'Позвольте пониманию развиваться',
      'Записывайте прозрения'
    ],
    reflectionPrompts: [
      'К каким выводам я пришёл?',
      'Какое понимание углубилось?',
      'Что открылось?'
    ],
    benefits: [
      'Глубокое понимание',
      'Философская зрелость',
      'Мудрость'
    ],
    tags: ['созерцание', 'философия', 'мудрость']
  },

  {
    id: 'ni-w8-integration-vision',
    type: 'reflection',
    title: 'Интеграция видения',
    description: 'Создание интегрированного видения жизни',
    duration: 60,
    difficulty: 'advanced',
    targetFunction: 'Ni',
    compatibleTypes: ['ESTP', 'ESFP'],
    instructions: [
      'Соберите все инсайты за 8 недель',
      'Какое единое видение появляется?',
      'Как все части складываются вместе?',
      'Напишите своё видение (1-2 страницы)',
      'Это ваш внутренний компас'
    ],
    reflectionPrompts: [
      'Какое видение появилось?',
      'Как оно направляет мою жизнь?',
      'Что я буду делать для его реализации?'
    ],
    benefits: [
      'Интегрированное видение',
      'Ясность пути',
      'Целостность'
    ],
    tags: ['интеграция', 'видение', 'целостность']
  }
]

// Exercises for Te (Extraverted Thinking) - INFP, ISFP
const TE_EXERCISES: Exercise[] = [
  // Week 1: Awareness
  {
    id: 'te-w1-decision-log',
    type: 'journaling',
    title: 'Дневник решений',
    description: 'Осознание своих процессов принятия решений',
    duration: 15,
    difficulty: 'beginner',
    targetFunction: 'Te',
    compatibleTypes: ['INFP', 'ISFP'],
    instructions: [
      'Записывайте все решения, которые принимаете за день',
      'Отмечайте: что решили, как долго думали, на основе чего',
      'Разделите решения на эмоциональные и логические',
      'Обратите внимание на откладывание решений',
      'Записывайте последствия принятых решений'
    ],
    reflectionPrompts: [
      'Какие решения давались легко, а какие трудно?',
      'Как часто вы откладывали решение?',
      'Какую роль играли эмоции в решениях?'
    ],
    benefits: [
      'Осознание паттернов принятия решений',
      'Развитие объективности',
      'Снижение прокрастинации'
    ],
    tags: ['решения', 'осознанность', 'логика']
  },
  {
    id: 'te-w1-small-goals',
    type: 'practice',
    title: 'Микро-цели дня',
    description: 'Практика постановки и достижения маленьких конкретных целей',
    duration: 10,
    difficulty: 'beginner',
    targetFunction: 'Te',
    compatibleTypes: ['INFP', 'ISFP'],
    instructions: [
      'Утром запишите 3 конкретные цели на день',
      'Формулируйте их измеримо: "написать 500 слов", не "поработать над текстом"',
      'Установите дедлайн для каждой цели',
      'Вечером отметьте выполнение',
      'Проанализируйте, что помешало или помогло'
    ],
    reflectionPrompts: [
      'Насколько конкретными получились ваши цели?',
      'Как вы себя чувствовали, достигая цели?',
      'Что мешало действовать по плану?'
    ],
    benefits: [
      'Развитие целеполагания',
      'Опыт достижения',
      'Связь планов с действиями'
    ],
    tags: ['цели', 'планирование', 'достижения']
  },
  // Week 2: Recognition
  {
    id: 'te-w2-efficiency-audit',
    type: 'practice',
    title: 'Аудит эффективности',
    description: 'Анализ того, как вы используете время и ресурсы',
    duration: 30,
    difficulty: 'intermediate',
    targetFunction: 'Te',
    compatibleTypes: ['INFP', 'ISFP'],
    instructions: [
      'Отслеживайте свои действия в течение дня каждые 30 минут',
      'Оцените каждое действие: продуктивное / нейтральное / отвлечение',
      'Подсчитайте процент продуктивного времени',
      'Определите главные "поглотители" времени',
      'Составьте один простой план улучшения'
    ],
    reflectionPrompts: [
      'Что вас удивило в результатах?',
      'Какие эмоции вызвал этот анализ?',
      'Готовы ли вы что-то изменить?'
    ],
    benefits: [
      'Объективный взгляд на себя',
      'Понимание своих привычек',
      'База для улучшений'
    ],
    tags: ['эффективность', 'время', 'анализ']
  },
  // Week 3-8 exercises abbreviated for space
  {
    id: 'te-w3-delegate',
    type: 'practice',
    title: 'Практика делегирования',
    description: 'Учимся передавать задачи другим',
    duration: 20,
    difficulty: 'intermediate',
    targetFunction: 'Te',
    compatibleTypes: ['INFP', 'ISFP'],
    instructions: [
      'Выберите одну задачу, которую можно делегировать',
      'Четко сформулируйте, что нужно сделать',
      'Объясните ожидаемый результат и сроки',
      'Передайте задачу, не вмешиваясь в процесс',
      'Дайте обратную связь по результату'
    ],
    reflectionPrompts: [
      'Насколько сложно было отпустить контроль?',
      'Как результат соотносится с ожиданиями?',
      'Что бы вы сделали иначе?'
    ],
    benefits: ['Освобождение ресурсов', 'Развитие доверия', 'Командная работа'],
    tags: ['делегирование', 'коммуникация', 'лидерство']
  }
]

// Exercises for Ti (Introverted Thinking) - ENFJ, ESFJ
const TI_EXERCISES: Exercise[] = [
  // Week 1: Awareness
  {
    id: 'ti-w1-why-chain',
    type: 'journaling',
    title: 'Цепочка "Почему?"',
    description: 'Глубинный анализ своих убеждений через последовательные вопросы',
    duration: 20,
    difficulty: 'beginner',
    targetFunction: 'Ti',
    compatibleTypes: ['ENFJ', 'ESFJ'],
    instructions: [
      'Выберите одно своё убеждение или мнение',
      'Спросите себя "Почему я так думаю?"',
      'На каждый ответ снова задайте "Почему?"',
      'Продолжайте минимум 5 уровней глубины',
      'Запишите всю цепочку рассуждений'
    ],
    reflectionPrompts: [
      'На каком уровне было сложнее всего ответить?',
      'Нашли ли вы основание своего убеждения?',
      'Изменилось ли ваше отношение к исходному мнению?'
    ],
    benefits: [
      'Развитие критического мышления',
      'Понимание своих убеждений',
      'Способность аргументировать'
    ],
    tags: ['анализ', 'убеждения', 'логика']
  },
  {
    id: 'ti-w1-solo-problem',
    type: 'practice',
    title: 'Самостоятельное решение',
    description: 'Практика решения проблемы без обращения за советом',
    duration: 30,
    difficulty: 'beginner',
    targetFunction: 'Ti',
    compatibleTypes: ['ENFJ', 'ESFJ'],
    instructions: [
      'Выберите небольшую проблему для решения',
      'Запретите себе спрашивать совета в течение дня',
      'Соберите информацию самостоятельно',
      'Проанализируйте варианты и выберите решение',
      'Реализуйте решение и оцените результат'
    ],
    reflectionPrompts: [
      'Как вы себя чувствовали без внешней поддержки?',
      'Насколько вы доверяете своему анализу?',
      'Что было самым сложным?'
    ],
    benefits: [
      'Уверенность в своём мышлении',
      'Независимость в решениях',
      'Развитие аналитики'
    ],
    tags: ['самостоятельность', 'решения', 'уверенность']
  },
  // Week 2: Recognition
  {
    id: 'ti-w2-logic-check',
    type: 'practice',
    title: 'Проверка логики',
    description: 'Анализ своих решений на логическую последовательность',
    duration: 15,
    difficulty: 'intermediate',
    targetFunction: 'Ti',
    compatibleTypes: ['ENFJ', 'ESFJ'],
    instructions: [
      'Возьмите недавнее важное решение',
      'Запишите аргументы "за" и "против"',
      'Проверьте каждый аргумент: факт или предположение?',
      'Найдите логические противоречия',
      'Оцените решение заново с учетом анализа'
    ],
    reflectionPrompts: [
      'Сколько ваших аргументов были фактами?',
      'Нашли ли вы противоречия в своей логике?',
      'Как эмоции влияли на ваши аргументы?'
    ],
    benefits: [
      'Объективность в решениях',
      'Распознавание предвзятости',
      'Качество аргументации'
    ],
    tags: ['логика', 'анализ', 'объективность']
  },
  {
    id: 'ti-w3-categorize',
    type: 'journaling',
    title: 'Систематизация знаний',
    description: 'Создание личной системы классификации информации',
    duration: 25,
    difficulty: 'intermediate',
    targetFunction: 'Ti',
    compatibleTypes: ['ENFJ', 'ESFJ'],
    instructions: [
      'Выберите область знаний, которая вам интересна',
      'Создайте собственную классификацию понятий',
      'Определите критерии для каждой категории',
      'Проверьте, нет ли пересечений и пробелов',
      'Проверьте систему на новых примерах'
    ],
    reflectionPrompts: [
      'Насколько сложно было создать логичную систему?',
      'Что эта систематизация вам дала?',
      'Где ваша система может дать сбой?'
    ],
    benefits: ['Структурное мышление', 'Глубина понимания', 'Способность обобщать'],
    tags: ['систематизация', 'категории', 'знания']
  }
]

// Exercises for Fe (Extraverted Feeling) - INTP, ISTP
const FE_EXERCISES: Exercise[] = [
  // Week 1: Awareness
  {
    id: 'fe-w1-emotion-notice',
    type: 'practice',
    title: 'Наблюдение за эмоциями других',
    description: 'Развитие внимательности к эмоциональному состоянию окружающих',
    duration: 15,
    difficulty: 'beginner',
    targetFunction: 'Fe',
    compatibleTypes: ['INTP', 'ISTP'],
    instructions: [
      'В течение дня наблюдайте за эмоциями 3 разных людей',
      'Отмечайте: выражение лица, тон голоса, позу',
      'Предположите, что они чувствуют',
      'Если возможно, проверьте свои предположения',
      'Записывайте наблюдения в конце дня'
    ],
    reflectionPrompts: [
      'Какие эмоции было легче распознать?',
      'Насколько точными были ваши предположения?',
      'Что вы обычно не замечаете в других?'
    ],
    benefits: [
      'Развитие эмпатии',
      'Понимание невербальных сигналов',
      'Улучшение коммуникации'
    ],
    tags: ['эмоции', 'наблюдение', 'эмпатия']
  },
  {
    id: 'fe-w1-appreciation',
    type: 'practice',
    title: 'Выражение благодарности',
    description: 'Практика искреннего выражения признательности',
    duration: 10,
    difficulty: 'beginner',
    targetFunction: 'Fe',
    compatibleTypes: ['INTP', 'ISTP'],
    instructions: [
      'Выберите одного человека, которому хотите сказать спасибо',
      'Подумайте, за что конкретно вы благодарны',
      'Сформулируйте это словами (конкретно, не общими фразами)',
      'Скажите это человеку лично или напишите',
      'Обратите внимание на реакцию и свои ощущения'
    ],
    reflectionPrompts: [
      'Насколько сложно было выразить благодарность?',
      'Как отреагировал человек?',
      'Как вы себя чувствовали после?'
    ],
    benefits: [
      'Укрепление связей',
      'Позитивные эмоции',
      'Практика эмоционального выражения'
    ],
    tags: ['благодарность', 'отношения', 'выражение']
  },
  // Week 2: Recognition
  {
    id: 'fe-w2-group-dynamics',
    type: 'practice',
    title: 'Анализ групповой динамики',
    description: 'Наблюдение за социальными процессами в группе',
    duration: 20,
    difficulty: 'intermediate',
    targetFunction: 'Fe',
    compatibleTypes: ['INTP', 'ISTP'],
    instructions: [
      'На следующей встрече/собрании наблюдайте за группой',
      'Отмечайте: кто лидирует, кто молчит, кто поддерживает',
      'Замечайте моменты напряжения и гармонии',
      'Определите общее настроение группы',
      'После встречи запишите наблюдения'
    ],
    reflectionPrompts: [
      'Какие роли вы заметили в группе?',
      'Как менялась атмосфера?',
      'Какую роль играли вы сами?'
    ],
    benefits: [
      'Понимание социальных процессов',
      'Навыки командной работы',
      'Социальная осознанность'
    ],
    tags: ['группа', 'динамика', 'социальное']
  },
  {
    id: 'fe-w3-active-listening',
    type: 'practice',
    title: 'Активное слушание',
    description: 'Практика глубокого слушания без советов и анализа',
    duration: 20,
    difficulty: 'intermediate',
    targetFunction: 'Fe',
    compatibleTypes: ['INTP', 'ISTP'],
    instructions: [
      'В следующем разговоре практикуйте только слушание',
      'Не давайте советов и не анализируйте',
      'Используйте только: "понимаю", "расскажи больше", кивки',
      'Отражайте эмоции: "похоже, тебя это расстроило"',
      'Позвольте человеку самому прийти к выводам'
    ],
    reflectionPrompts: [
      'Как сложно было не давать советы?',
      'Как реагировал собеседник?',
      'Что вы узнали о человеке благодаря слушанию?'
    ],
    benefits: ['Глубина связи', 'Доверие в отношениях', 'Эмоциональная поддержка'],
    tags: ['слушание', 'эмпатия', 'коммуникация']
  }
]

// Exercises for Fi (Introverted Feeling) - ENTJ, ESTJ
const FI_EXERCISES: Exercise[] = [
  // Week 1: Awareness
  {
    id: 'fi-w1-values-list',
    type: 'journaling',
    title: 'Список ценностей',
    description: 'Исследование своих глубинных ценностей и приоритетов',
    duration: 30,
    difficulty: 'beginner',
    targetFunction: 'Fi',
    compatibleTypes: ['ENTJ', 'ESTJ'],
    instructions: [
      'Запишите 20 вещей, которые для вас важны',
      'Без редактирования, первое что приходит в голову',
      'Сгруппируйте похожие пункты',
      'Выберите 5 главных ценностей',
      'Для каждой напишите: почему это важно именно вам?'
    ],
    reflectionPrompts: [
      'Были ли неожиданные пункты в списке?',
      'Как ваши ценности отражаются в ваших действиях?',
      'Какие ценности вы унаследовали, а какие выбрали сами?'
    ],
    benefits: [
      'Ясность приоритетов',
      'Основа для решений',
      'Самопонимание'
    ],
    tags: ['ценности', 'самопознание', 'приоритеты']
  },
  {
    id: 'fi-w1-emotion-name',
    type: 'journaling',
    title: 'Называние эмоций',
    description: 'Развитие эмоционального словаря и осознанности чувств',
    duration: 15,
    difficulty: 'beginner',
    targetFunction: 'Fi',
    compatibleTypes: ['ENTJ', 'ESTJ'],
    instructions: [
      'Три раза в день (утро, день, вечер) остановитесь',
      'Спросите себя: "Что я сейчас чувствую?"',
      'Назовите эмоцию максимально точно (не просто "хорошо/плохо")',
      'Используйте конкретные слова: раздражение, воодушевление, тревога',
      'Запишите эмоцию и её возможную причину'
    ],
    reflectionPrompts: [
      'Какие эмоции повторялись чаще всего?',
      'Какие было сложно назвать?',
      'Заметили ли вы связь между ситуациями и эмоциями?'
    ],
    benefits: [
      'Эмоциональный интеллект',
      'Саморегуляция',
      'Понимание своих реакций'
    ],
    tags: ['эмоции', 'осознанность', 'словарь']
  },
  // Week 2: Recognition
  {
    id: 'fi-w2-boundary-check',
    type: 'journaling',
    title: 'Проверка границ',
    description: 'Осознание и укрепление личных границ',
    duration: 20,
    difficulty: 'intermediate',
    targetFunction: 'Fi',
    compatibleTypes: ['ENTJ', 'ESTJ'],
    instructions: [
      'Вспомните ситуации, где чувствовали дискомфорт или раздражение',
      'Запишите: что именно вас задело?',
      'Определите: какая ваша граница была нарушена?',
      'Сформулируйте, как бы вы хотели, чтобы было',
      'Подумайте, как можно защитить эту границу в будущем'
    ],
    reflectionPrompts: [
      'Какие границы нарушаются чаще всего?',
      'Как вы обычно реагируете на нарушение границ?',
      'Что мешает вам устанавливать границы?'
    ],
    benefits: [
      'Защита личного пространства',
      'Уважение к себе',
      'Здоровые отношения'
    ],
    tags: ['границы', 'самоуважение', 'отношения']
  },
  {
    id: 'fi-w3-authenticity',
    type: 'practice',
    title: 'День аутентичности',
    description: 'Практика честного выражения своих предпочтений',
    duration: 60,
    difficulty: 'intermediate',
    targetFunction: 'Fi',
    compatibleTypes: ['ENTJ', 'ESTJ'],
    instructions: [
      'Выберите один день для практики',
      'Когда спрашивают ваше мнение — отвечайте честно',
      'Если не хотите что-то делать — скажите об этом',
      'Выбирайте то, что нравится вам, а не то, что "правильно"',
      'Вечером запишите, как прошёл день'
    ],
    reflectionPrompts: [
      'Что было самым сложным в этот день?',
      'Как реагировали окружающие?',
      'Как вы себя чувствовали, будучи честным?'
    ],
    benefits: ['Аутентичность', 'Уверенность в себе', 'Целостность'],
    tags: ['аутентичность', 'честность', 'выбор']
  }
]

// Database of all exercises by function
export const EXERCISES_BY_FUNCTION: Record<CognitiveFunction, Exercise[]> = {
  Se: SE_EXERCISES,
  Si: SI_EXERCISES,
  Ne: NE_EXERCISES,
  Ni: NI_EXERCISES,
  Te: TE_EXERCISES,
  Ti: TI_EXERCISES,
  Fe: FE_EXERCISES,
  Fi: FI_EXERCISES,
}

// Get exercises for specific MBTI type and week
export function getExercisesForWeek(
  mbtiType: MBTIType,
  week: WeekNumber
): Exercise[] {
  const inferiorFunction = getInferiorFunction(mbtiType)
  const allExercises = EXERCISES_BY_FUNCTION[inferiorFunction] || []

  // Filter exercises for this week (based on ID pattern)
  return allExercises.filter(ex => {
    const weekMatch = ex.id.match(/-w(\d+)-/)
    return weekMatch && parseInt(weekMatch[1]) === week
  })
}

// Get all exercises for MBTI type
export function getAllExercises(mbtiType: MBTIType): Exercise[] {
  const inferiorFunction = getInferiorFunction(mbtiType)
  return EXERCISES_BY_FUNCTION[inferiorFunction] || []
}

// Get exercise by ID
export function getExerciseById(id: string): Exercise | undefined {
  for (const exercises of Object.values(EXERCISES_BY_FUNCTION)) {
    const found = exercises.find(ex => ex.id === id)
    if (found) return found
  }
  return undefined
}

// Get recommended exercises based on user progress
export function getRecommendedExercises(
  mbtiType: MBTIType,
  currentWeek: WeekNumber,
  completedExerciseIds: string[]
): Exercise[] {
  const weekExercises = getExercisesForWeek(mbtiType, currentWeek)

  // Filter out completed exercises
  const incomplete = weekExercises.filter(
    ex => !completedExerciseIds.includes(ex.id)
  )

  // Sort by difficulty (easier first)
  return incomplete.sort((a, b) => {
    const difficultyOrder = { beginner: 0, intermediate: 1, advanced: 2 }
    return difficultyOrder[a.difficulty] - difficultyOrder[b.difficulty]
  })
}

// Get next exercise to do
export function getNextExercise(
  mbtiType: MBTIType,
  currentWeek: WeekNumber,
  completedExerciseIds: string[]
): Exercise | null {
  const recommended = getRecommendedExercises(
    mbtiType,
    currentWeek,
    completedExerciseIds
  )
  return recommended[0] || null
}
